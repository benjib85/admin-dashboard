{% extends "layout.html" %}
{% set view = "products"%}

{% block title %}
    Products
{% endblock %}

{% block head %}
<script>
  var product_data = '{{products|tojson|safe}}'
</script>
{% endblock %}

{% block main %}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Products</h1>
  </div>

  <div class="accordion" id="accordionExample">

    {% for product in products["data"] %}

    <div class="card" id = "product_card_{{product['id']}}">
      <div class="card-header" id="heading-{{product['id']}}">
        <h2 class="mb-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse-{{product['id']}}" aria-expanded="true" aria-controls="collapse-{{product['id']}}" id="card_header_button">
        </h2>
      </div>
      <div id="collapse-{{product['id']}}" class="collapse" aria-labelledby="heading-{{product['id']}}" data-parent="#accordionExample">
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>Warning! </strong>Unsaved changes to this product
          </div>
        <div class="card-body">
            
          <form>
            <div class="form-row">
              <div class="col-md-9 mb-3">
                <label>Product name</label>
                <input class="form-control" type="text" placeholder="" id="product_name">
                
              </div>
              <div class="col-md-3 mb-3">
                  <label>Unit price</label>
                  <div class="input-group">
                  <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroupPrepend">Â£</span>
                  </div>
                  <input class="form-control" id="product_price" type="number" placeholder="Default input" aria-describedby="inputGroupPrepend" value=0 required>
              </div>
            </div>
            </div>
            <br>
            {% for discount_level in product["discount_levels"] %}

            <div class="container">
              <div class="row">
                <div class="col-sm-auto">
                  <label  for="customRange3"id="product_slider_label"></label>
                </div>
                <div class="col-sm-4" id="product-discount-range">
                  <input type="range"  class="form-control-range" min="0" max="25" step="0.5" value="0" data-qty="1" id="product_unit_slider">
                </div>
                <div class="col-md-auto">
                  <span class="badge badge-primary" id=product_post_discount_price ></span>
                </div>  
                <div class="col-auto">
                  <span class="badge badge-primary" id=product_discount ></span>
                </div>
                
              </div>
            </div>
            <br>

            {% endfor %}
            <br>
            <button type="button" class="btn btn-primary" id="save_button">Save</button>
           
          
        </form>
        </div>
      </div>
    </div>

    {% endfor %}

  </div>

{% endblock %}
